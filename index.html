<html>
<head>
  <title></title>
  <meta http-equiv="X-UA-Compatible" content="IE=8" />
  <script type="text/javascript" src="vendor/underscore.js"></script>
  <script type="text/javascript" src="vendor/jquery-1.9.1.min.js"></script>
  <script type="text/javascript" src="dist/nox.js"></script>
  <style type="text/css">
    .highlight-true {
      background: green;
    }
  </style>
  <script type="text/javascript">

    var LoginForm = function(){
      this.email = "";
      this.password = "";

      // this.validator = new Nox.Validator(this);
      
      // this.validator.field("email", true).min(3).min(20).pattern(/@/);

      // this.validator.field("password", true);

      // this.validator.fun("virtualField", function(){
      //   if(this.active)
      //     return null;

      //   return "not_active";
      // });
    };

    // LoginForm.prototype.submit = function(){
      
    //   if(this.validator.validate()){
    //     // call server
    //   }
    // };

    var app = {
          name: "joe",
          emptyName: "",
          entries: [],
          loginForm: new LoginForm()
        },
        vars = {};

    app.numDone = function(){
      return _.where(this.entries, {done: true}).length;
    };

    app.removePerson = function(person){
      this.entries = _.without(this.entries, person);
    };

    for(var i=0; i < 3; i++){
      app.entries.push({id: _.uniqueId(), name: "xxx", done: false});
    }

    Nox.initAndUpdateBindings(app);
  </script>
</head>
<body>

  <p>we have {{this.entries.length}} entries ({{this.numDone()}} done)</p>

  
<!--  data-show="this.name.length > 10" -->
  <ul data-loop-person="this.entries">
    <li>
      <input type="checkbox" data-check="person.done"/>
      <span data-text="this.name"></span>
      <span data-text="person.name"></span>
      <input data-value="this.name" class="color-{{this.name.length > 5 ? 'red' : 'none'}}"/>
      <input data-value="this.name"/>
      <input data-value="this.name"/>
      <input data-value="this.name"/>
      <input data-value="person.name"/>
      <a href="#" data-click="alert(person.name + ', ' + person.id)">action</a>
      <a href="#" data-click="this.removePerson(person)">remove</a>
    </li>
  </ul>

  <span data-text="this.name"></span>

  <input data-value="this.name"/>
  <input placeholder="xx" data-valuePlaceholder="this.emptyName"/>

</body>
</html>